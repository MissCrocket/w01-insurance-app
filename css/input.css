@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom component and utility layers from index.html */
@layer components {
  .screen { @apply w-full max-w-7xl mx-auto p-4 md:p-6 lg:p-8; }
  .card { @apply bg-white dark:bg-neutral-900 rounded-2xl shadow-soft p-4 md:p-6; }
  
  /* [ACCESSIBILITY] Increased touch target size for buttons */
  .btn { @apply inline-flex items-center justify-center rounded-xl px-4 py-2 font-medium bg-brand text-white hover:opacity-90 active:opacity-80 transition disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px]; }
  .btn-ghost { @apply inline-flex items-center justify-center rounded-xl px-4 py-2 font-medium border border-neutral-300 dark:border-neutral-700 text-neutral-800 dark:text-neutral-200 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition min-h-[44px]; }
  .nav-link { @apply text-neutral-300 hover:text-white transition-colors min-h-[44px] flex items-center px-2; }
  
  .section-title { @apply text-xl md:text-2xl font-semibold text-neutral-900 dark:text-white; }
  .muted { @apply text-neutral-600 dark:text-neutral-300; }

  /* [ACCESSIBILITY] Increased touch target size for options */
  .option-label { @apply flex items-center gap-4 border border-neutral-300 dark:border-neutral-700 rounded-xl p-4 cursor-pointer transition hover:bg-neutral-100 dark:hover:bg-neutral-800 text-neutral-800 dark:text-white min-h-[44px]; }
  .option-label.is-selected { @apply border-brand ring-2 ring-brand; }
  .option-label.is-correct { @apply border-green-500 bg-green-500/10 text-green-700 dark:text-green-400; }
  .option-label.is-incorrect { @apply border-red-500 bg-red-500/10 text-red-700 dark:text-red-400; }
  .option-label.is-disabled { @apply cursor-not-allowed opacity-70 hover:bg-transparent dark:hover:bg-transparent; }
  
  .explanation-card { @apply mt-4 p-4 rounded-xl bg-neutral-100 dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700; }
  
  .results-list { @apply mt-6 space-y-8; }
  .result-item { @apply p-4 border border-neutral-200 dark:border-neutral-700 rounded-xl; }
  .result-item__question { @apply font-semibold text-neutral-800 dark:text-neutral-200; }
  .result-item__answer { @apply mt-2 text-sm text-neutral-600 dark:text-neutral-300; }
  
  .question-text { @apply pr-16; }
  
  .mode-switch { @apply mt-4 flex items-center gap-2 rounded-xl bg-black/20 p-1 w-fit; }
  .mode-switch .btn { @apply bg-transparent text-neutral-400 hover:text-white; }
  .mode-switch .btn[aria-pressed="true"] { @apply bg-brand text-white; }
  
  .topics-grid { @apply mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6; }
  .topic-card { @apply text-left p-6 rounded-2xl bg-white/5 border border-white/10 transition-colors hover:bg-white/10 min-h-[100px]; }
  .topic-card__title { @apply font-semibold text-lg text-white; }
  .topic-card__meta { @apply mt-1 text-sm text-neutral-400; }

  /* --- [NEW] Style for Drag & Drop --- */
  .card-list.drag-over { @apply bg-white/10 border-dashed border-2 border-amber-400 rounded-lg; }

  /* [NEW] For highlighting the selected answer in exam mode */
  .option-label.is-selected-exam {
    @apply bg-blue-500/20 border-blue-500/50 font-bold text-white opacity-100;
  }

  /* [NEW] For showing a neutral "answered" state in the quiz nav */
  .quiz-nav-item.is-answered {
    @apply bg-neutral-600 border-neutral-500 text-white;
  }
  
  /* --- STYLES for Flagging Feature & Quiz Nav --- */
  .quiz-layout { @apply flex flex-col lg:grid lg:grid-cols-4 gap-6; }
  .question-container { @apply lg:col-span-3 order-1; } /* Question first on mobile */
  .quiz-nav-panel { @apply lg:col-span-1 bg-white/5 border border-white/10 rounded-2xl p-4 order-2; } /* Nav second on mobile */
  .quiz-nav-header { @apply text-lg font-semibold mb-4 pb-3 border-b border-white/10; }
  .quiz-nav-grid { @apply grid gap-2; grid-template-columns: repeat(auto-fill, minmax(44px, 1fr)); }
  .quiz-nav-item { @apply relative w-11 h-11 flex items-center justify-center rounded-full border-2 border-neutral-700 text-neutral-300 font-semibold cursor-pointer transition-colors duration-200; }
  .quiz-nav-item:hover { @apply bg-brand border-brand text-white; }
  .quiz-nav-item.is-current { @apply bg-brand border-brand text-white; }
  .quiz-nav-item.is-answered-correct { @apply bg-green-500/20 border-green-500/50; }
  .quiz-nav-item.is-answered-incorrect { @apply bg-red-500/20 border-red-500/50; }
  .quiz-nav-item .flag-marker { @apply absolute -top-1 -right-1 w-5 h-5 text-amber-400; }
  .flag-btn { 
    @apply absolute top-3 right-3 z-10 flex-shrink-0 inline-flex items-center justify-center border border-neutral-700 text-neutral-300 rounded-full transition-colors hover:border-amber-400 hover:text-amber-400 w-11 h-11;
    pointer-events: auto;
  }
  .flag-btn svg { @apply w-5 h-5; }
  /* [UI] Added visual "pressed" state for the flag button */
  .flag-btn[aria-pressed="true"] { @apply border-amber-400 text-amber-400 bg-amber-400/20; }
  .flag-btn[aria-pressed="true"] svg { @apply fill-current; }
  .question-card { @apply relative; }
  /* --- END STYLES --- */
}

@layer utilities {
  .app-shell { @apply min-h-screen bg-gradient-to-b from-brand-dark to-neutral-900 text-white; }
  .app-main { @apply screen; }
  .center-screen-content { @apply flex flex-col items-center justify-center min-h-[calc(100vh-200px)]; }
  .list-disc { list-style-type: disc; }
  .list-inside { list-style-position: inside; }
}

@layer base {
  body {
    -webkit-user-select: none; /* Safari */
    -moz-user-select: none;    /* Firefox */
    -ms-user-select: none;     /* IE/Edge */
    user-select: none;         /* Standard */
  }
}

@layer base {
  h1:focus, h2:focus, h3:focus {
    outline: none;
  }
}